// Generated by CoffeeScript 1.9.1
(function() {
  (function($) {
    var links, panel;
    panel = {
      isDevice: false,
      isMinNavActive: false,
      isOffCanvasActive: false,
      deviceWidth: 700,
      windowWidth: 0,
      $navTrigger: $('span.nav-trigger'),
      $body: $(document.body),
      $menuBar: $('.site-nav li'),
      $menuActive: null,
      init: function() {
        var self;
        self = this;
        self.$menuActive = self.$menuBar.find('.active');
        self.bindEvents();
        return this;
      },
      bindEvents: function() {
        var self;
        self = this;
        $(window).smartresize(function() {
          self.windowWidth = $(this).width();
          self.checkPanel();
          if (self.windowWidth <= self.deviceWidth) {
            self.disableAll();
            return;
          }
        });
        self.$navTrigger.on('click', function(e) {
          e.preventDefault();
          self.checkPanel();
          if (self.isDevice === true && self.isMinNavActive === false) {
            self.openOffCanvas();
          }
          if (self.isDevice === true && self.isMinNavActive === false && self.isOffCanvasActive === true) {
            self.closeOffCanvas();
          }
          if (self.isDevice === false && self.isMinNavActive === false) {
            self.enableNav();
          }
          if (self.isDevice === false && self.isMinNavActive === true) {
            self.disableNav();
          }
          return false;
        });
        self.enableDropdown();
      },
      checkPanel: function() {
        var self;
        self = this;
        self.isDevice = self.windowWidth <= self.deviceWidth ? true : false;
        self.isMinNavActive = self.$body.hasClass('nav-min');
        self.isOffCanvasActive = self.$body.hasClass('off-canvas');
      },
      disableAll: function() {
        var self;
        self = this;
        self.$body.removeClass().addClass('admin');
      },
      enableNav: function() {
        var self;
        self = this;
        self.$body.removeClass('off-canvas').addClass('nav-min');
        self.disableDropdown();
      },
      disableNav: function() {
        var self;
        self = this;
        self.$body.removeClass('nav-min').addClass('off-canvas');
        self.enableDropdown();
      },
      openOffCanvas: function() {
        var self;
        self = this;
        self.$body.removeClass('nav-min').addClass('off-canvas');
      },
      closeOffCanvas: function() {
        var self;
        self = this;
        self.$body.removeClass().addClass('admin');
      },
      disableDropdown: function() {
        var self;
        self = this;
        self.$menuBar.removeClass('active');
        self.$menuBar.off('click');
      },
      enableDropdown: function() {
        var self;
        self = this;
        return self.$menuBar.on('click', function(e) {
          var that;
          that = $(this);
          self.$menuActive.removeClass('active');
          if (that.hasClass('active') === true) {
            return that.removeClass('active').find('ul.sub-nav-list').slideUp('fast');
          } else if (self.$menuBar.hasClass('active') === false) {
            return that.addClass('active').find('ul.sub-nav-list').slideDown('fast');
          } else {
            self.$menuBar.removeClass('active').find('ul.sub-nav-list').slideUp('fast');
            return that.addClass('active').find('ul.sub-nav-list').slideDown('fast');
          }
        });
      }
    };
    panel.init();
    $('.dropdown-toggle').dropdown();
    $('.noti-menu').perfectScrollbar({
      suppressScrollX: true
    });
    links = $('a');
    $.each(links, function(index, el) {
      el.onmousedown = function() {
        this.blur();
        return false;
      };
      el.onclick = function() {
        this.blur();
      };
      if (/msie/i.test(navigator.userAgent) && !/opera/i.test(navigator.userAgent)) {
        return el.onfocus = function() {
          this.blur();
        };
      }
    });
  })(jQuery);

}).call(this);
